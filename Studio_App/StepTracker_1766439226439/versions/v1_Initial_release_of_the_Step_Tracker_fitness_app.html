<!--
APP_NAME: Step Tracker
APP_DESCRIPTION: Track your daily activity, heart points, and weekly fitness goals.
APP_ICON: 
APP_CATEGORY: Productivity
WINDOW_WIDTH: 380
WINDOW_HEIGHT: 520
VERSION_SUMMARY: Initial release of the Step Tracker fitness app.
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step Tracker</title>
    <style>
        :root {
            --bg-color: #121212;
            --surface-color: #1e1e1e;
            --accent-color: #64b5f6;
            --text-primary: #ffffff;
            --text-secondary: #9e9e9e;
            --button-active: #37474f;
            --button-inactive: transparent;
            --border-color: #333333;
            --font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            --radius: 12px;
        }

        body.mobile-mode {
            --radius: 16px;
        }

        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: var(--font-family);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        #app {
            width: 100%;
            height: 100%;
            max-width: 400px;
            background: var(--bg-color);
            display: flex;
            flex-direction: column;
            padding: 20px;
            position: relative;
        }

        /* Header Navigation */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .header h1 {
            font-size: 1.1rem;
            font-weight: 500;
            margin: 0;
            text-transform: lowercase;
        }

        .nav-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1.5rem;
            padding: 8px;
            border-radius: 50%;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-btn:active {
            transform: scale(0.9);
        }

        /* Summary Section */
        .summary {
            text-align: center;
            margin-bottom: 30px;
        }

        .summary-value {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .summary-value .icon {
            fill: var(--accent-color);
            width: 18px;
            height: 18px;
        }

        .summary-value strong {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Chart Area */
        .chart-container {
            flex-grow: 1;
            position: relative;
            margin-bottom: 30px;
            display: flex;
            flex-direction: column;
        }

        .chart-y-axis {
            position: absolute;
            right: 0;
            top: 0;
            bottom: 40px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: right;
            pointer-events: none;
            z-index: 1;
        }

        .chart-y-axis span.highlight {
            color: var(--accent-color);
        }

        .chart-svg {
            width: 100%;
            height: 100%;
            min-height: 200px;
        }

        .grid-line {
            stroke: var(--border-color);
            stroke-width: 1;
        }

        .grid-line.goal {
            stroke-dasharray: 4 4;
            stroke: rgba(100, 181, 246, 0.4);
        }

        .bar {
            fill: var(--accent-color);
            rx: 3;
            transition: height 0.3s ease, y 0.3s ease;
            cursor: pointer;
        }

        .bar:hover {
            fill: #90caf9;
        }

        .bar-label {
            font-size: 0.8rem;
            fill: var(--text-secondary);
            text-anchor: middle;
        }

        .bar-label.active {
            fill: var(--text-primary);
            font-weight: bold;
        }

        /* Tabs Selection */
        .tabs {
            display: flex;
            background: var(--surface-color);
            padding: 4px;
            border-radius: 24px;
            gap: 4px;
            margin-top: auto;
        }

        .tab {
            flex: 1;
            padding: 10px;
            border: none;
            background: var(--button-inactive);
            color: var(--text-secondary);
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab.active {
            background: var(--button-active);
            color: var(--text-primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        /* Tooltip style popup */
        #tooltip {
            position: absolute;
            background: var(--surface-color);
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 0.8rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            border: 1px solid var(--border-color);
            z-index: 10;
        }

        /* Footer text */
        .footer-hint {
            margin-top: 15px;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: center;
            line-height: 1.4;
        }

        /* Accessibility/Mobile Mode */
        body.mobile-mode .tab {
            padding: 14px;
            font-size: 1rem;
        }
        body.mobile-mode .nav-btn {
            padding: 12px;
        }
    </style>
</head>
<body>

<div id="app">
    <div class="header">
        <button class="nav-btn" onclick="app.prevWeek()" aria-label="Previous week">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
        </button>
        <h1 id="date-range">december 15–21.</h1>
        <button class="nav-btn" onclick="app.nextWeek()" aria-label="Next week">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
        </button>
    </div>

    <div class="summary">
        <div class="summary-value">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="M13.5,19H14.5C14.78,19 15,18.78 15,18.5V17.5H13.5V19M11,19H12V17.5H11V19M13.5,16.5H15V15.5H13.5V16.5M11,16.5H12V15.5H11V16.5M13.5,14.5H15V13.5H13.5V14.5M11,14.5H12V13.5H11V14.5M13.5,12.5H15V11.5H13.5V12.5M11,12.5H12V11.5H11V12.5M16,19V11.5C16,10.12 14.88,9 13.5,9H11V6.5C11,5.12 9.88,4 8.5,4C7.12,4 6,5.12 6,6.5V13.5C6,14.88 7.12,16 8.5,16H10V18.5C10,19.88 11.12,21 12.5,21H16V19M8.5,15C7.67,15 7,14.33 7,13.5V6.5C7,5.67 7.67,5 8.5,5C9.33,5 10,5.67 10,6.5V7H11.5V10.5H13.5C14.05,10.5 14.5,10.95 14.5,11.5V12.5H12.5V13.5H14.5V14.5H12.5V15.5H14.5V16.5H12.5V17.5H14.5V18.5C14.5,19.05 14.05,19.5 13.5,19.5H12.5C11.95,19.5 11.5,19.05 11.5,18.5V16.5H10.5V15H8.5Z" />
            </svg>
            <span id="summary-total">22 505 lépés</span>
        </div>
    </div>

    <div class="chart-container">
        <div class="chart-y-axis">
            <span id="y-max">11 000</span>
            <span id="y-goal" class="highlight">10 000</span>
            <span id="y-mid">5 000</span>
            <span>0</span>
        </div>
        <svg id="chart" class="chart-svg" viewBox="0 0 300 200">
            <!-- Grid Lines -->
            <line x1="0" y1="180" x2="280" y2="180" class="grid-line" />
            <line x1="0" y1="100" x2="280" y2="100" class="grid-line" />
            <line x1="0" y1="20" x2="280" y2="20" class="grid-line" />
            <line x1="0" y1="40" x2="280" y2="40" class="grid-line goal" />

            <!-- Bars will be injected here -->
            <g id="bars-group"></g>

            <!-- Labels -->
            <text x="20" y="195" class="bar-label">H</text>
            <text x="60" y="195" class="bar-label">K</text>
            <text x="100" y="195" class="bar-label">Sze</text>
            <text x="140" y="195" class="bar-label">Cs</text>
            <text x="180" y="195" class="bar-label">P</text>
            <text x="220" y="195" class="bar-label">Szo</text>
            <text x="260" y="195" class="bar-label active">V</text>
        </svg>
        <div id="tooltip"></div>
    </div>

    <div class="tabs">
        <button id="btn-points" class="tab" onclick="app.setMode('points')">Szívpontok</button>
        <button id="btn-steps" class="tab active" onclick="app.setMode('steps')">Lépések</button>
    </div>

    <div class="footer-hint">
        A lépésszámmal azt mérheti, hogy mennyit mozog. Napi cél: 10 000 lépés.
    </div>
</div>

<script>
    const app = {
        mode: 'steps', // 'steps' or 'points'
        currentWeekOffset: 0,
        audioCtx: null,

        data: {
            steps: [
                [200, 1500, 8500, 7200, 8600, 9500, 2405], // Current week (offset 0)
                [6000, 11000, 9000, 12000, 10500, 14000, 8000], // Prev week (offset -1)
                [4000, 3000, 5500, 2000, 9000, 11000, 5000] // Prev prev week (offset -2)
            ],
            points: [
                [5, 12, 45, 38, 42, 55, 18],
                [35, 60, 50, 75, 62, 80, 45],
                [22, 18, 30, 15, 52, 65, 28]
            ]
        },

        init() {
            this.render();
            this.checkMobile();
            window.addEventListener('resize', () => this.checkMobile());
        },

        checkMobile() {
            if (window.innerWidth < 450) {
                document.body.classList.add('mobile-mode');
            } else {
                document.body.classList.remove('mobile-mode');
            }
        },

        playSound(type) {
            if (!this.audioCtx) this.audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = this.audioCtx.createOscillator();
            const gain = this.audioCtx.createGain();
            
            osc.connect(gain);
            gain.connect(this.audioCtx.destination);
            
            if (type === 'click') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(440, this.audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(220, this.audioCtx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.1, this.audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.audioCtx.currentTime + 0.1);
                osc.start();
                osc.stop(this.audioCtx.currentTime + 0.1);
            } else if (type === 'nav') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(330, this.audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(350, this.audioCtx.currentTime + 0.05);
                gain.gain.setValueAtTime(0.05, this.audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.audioCtx.currentTime + 0.05);
                osc.start();
                osc.stop(this.audioCtx.currentTime + 0.05);
            }
        },

        setMode(mode) {
            if (this.mode === mode) return;
            this.playSound('click');
            this.mode = mode;
            document.getElementById('btn-steps').classList.toggle('active', mode === 'steps');
            document.getElementById('btn-points').classList.toggle('active', mode === 'points');
            this.render();
        },

        prevWeek() {
            if (Math.abs(this.currentWeekOffset) < this.data.steps.length - 1) {
                this.playSound('nav');
                this.currentWeekOffset--;
                this.render();
            }
        },

        nextWeek() {
            if (this.currentWeekOffset < 0) {
                this.playSound('nav');
                this.currentWeekOffset++;
                this.render();
            }
        },

        render() {
            const dataIdx = Math.abs(this.currentWeekOffset);
            const dataset = this.mode === 'steps' ? this.data.steps[dataIdx] : this.data.points[dataIdx];
            const total = dataset.reduce((a, b) => a + b, 0);
            
            // Header Logic
            const months = ["január", "február", "március", "április", "május", "június", "július", "augusztus", "szeptember", "október", "november", "december"];
            const baseMonth = 11; // December
            const startDay = 15 + (this.currentWeekOffset * 7);
            const endDay = startDay + 6;
            document.getElementById('date-range').innerText = `${months[baseMonth]} ${startDay}–${endDay}.`;
            
            // Summary Text
            const unit = this.mode === 'steps' ? 'lépés' : 'szívpont';
            document.getElementById('summary-total').innerHTML = `<strong>${total.toLocaleString('hu-HU')}</strong> ${unit}`;

            // Axis Logic
            const maxVal = this.mode === 'steps' ? 11000 : 100;
            const goalVal = this.mode === 'steps' ? 10000 : 70;
            const midVal = maxVal / 2;

            document.getElementById('y-max').innerText = maxVal.toLocaleString('hu-HU');
            document.getElementById('y-goal').innerText = goalVal.toLocaleString('hu-HU');
            document.getElementById('y-mid').innerText = midVal.toLocaleString('hu-HU');

            // Bar Group Logic
            const barsGroup = document.getElementById('bars-group');
            barsGroup.innerHTML = '';
            
            const chartHeight = 180 - 20; // range from y=20 to y=180
            const barWidth = 12;
            const startX = 20 - (barWidth/2);
            const spacing = 40;

            dataset.forEach((val, i) => {
                const height = (val / maxVal) * chartHeight;
                const cappedHeight = Math.min(height, chartHeight + 10);
                const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                
                rect.setAttribute("x", startX + (i * spacing));
                rect.setAttribute("y", 180 - cappedHeight);
                rect.setAttribute("width", barWidth);
                rect.setAttribute("height", cappedHeight);
                rect.setAttribute("class", "bar");
                
                rect.addEventListener('mouseenter', (e) => this.showTooltip(e, val, unit));
                rect.addEventListener('mouseleave', () => this.hideTooltip());
                rect.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.showTooltip(e, val, unit);
                });
                
                barsGroup.appendChild(rect);
            });
        },

        showTooltip(e, val, unit) {
            const tooltip = document.getElementById('tooltip');
            tooltip.innerText = `${val.toLocaleString('hu-HU')} ${unit}`;
            tooltip.style.opacity = '1';
            
            const rect = e.target.getBoundingClientRect();
            const containerRect = document.querySelector('.chart-container').getBoundingClientRect();
            
            tooltip.style.left = `${rect.left - containerRect.left + (rect.width / 2) - (tooltip.offsetWidth / 2)}px`;
            tooltip.style.top = `${rect.top - containerRect.top - 35}px`;
        },

        hideTooltip() {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.opacity = '0';
        }
    };

    window.onload = () => app.init();
</script>

</body>
</html>
<!--
APP_NAME: Step Tracker
APP_DESCRIPTION: Fitness activity dashboard for tracking daily steps and heart points.
APP_ICON: 
APP_CATEGORY: Productivity
WINDOW_WIDTH: 380
WINDOW_HEIGHT: 520
VERSION_SUMMARY: Clean UI with animated bar charts and interactive goals.
-->
    <!-- App code follows above -->
</html><!--
APP_NAME: Step Tracker
APP_DESCRIPTION: A minimalist fitness dashboard for tracking steps and activity goals.
APP_ICON: 
APP_CATEGORY: Productivity
WINDOW_WIDTH: 380
WINDOW_HEIGHT: 520
VERSION_SUMMARY: Refined dark mode, interactive SVG charts, and synthesized UI sounds.
-->

<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step Tracker</title>
    <style>
        :root {
            --bg-color: #121212;
            --surface-color: #1e1e1e;
            --accent-color: #64b5f6;
            --text-primary: #ffffff;
            --text-secondary: #9e9e9e;
            --button-active: #3c4a52;
            --button-inactive: transparent;
            --border-color: #333333;
            --font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            --radius: 12px;
        }

        body.mobile-mode {
            --radius: 16px;
        }

        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: var(--font-family);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        #app {
            width: 100%;
            height: 100%;
            max-width: 400px;
            background: var(--bg-color);
            display: flex;
            flex-direction: column;
            padding: 24px;
            position: relative;
        }

        /* Header Navigation */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 1.15rem;
            font-weight: 500;
            margin: 0;
            text-transform: lowercase;
            letter-spacing: 0.5px;
        }

        .nav-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-primary);
        }

        .nav-btn:disabled {
            opacity: 0.2;
            cursor: default;
        }

        /* Summary Section */
        .summary {
            text-align: center;
            margin-bottom: 40px;
        }

        .summary-value {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .summary-value .icon {
            fill: var(--accent-color);
            width: 20px;
            height: 20px;
            opacity: 0.9;
        }

        .summary-value strong {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 1.1rem;
        }

        /* Chart Area */
        .chart-container {
            flex-grow: 1;
            position: relative;
            margin-bottom: 30px;
            display: flex;
            flex-direction: column;
        }

        .chart-y-axis {
            position: absolute;
            right: 0;
            top: 0;
            bottom: 40px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: right;
            pointer-events: none;
            z-index: 1;
        }

        .chart-y-axis span.highlight {
            color: var(--accent-color);
            font-weight: bold;
        }

        .chart-svg {
            width: 100%;
            height: 100%;
            min-height: 220px;
        }

        .grid-line {
            stroke: var(--border-color);
            stroke-width: 1;
        }

        .grid-line.goal {
            stroke-dasharray: 4 4;
            stroke: rgba(100, 181, 246, 0.5);
            stroke-width: 1.5;
        }

        .bar {
            fill: var(--accent-color);
            rx: 3;
            transition: height 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), y 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }

        .bar:hover {
            fill: #90caf9;
        }

        .bar-label {
            font-size: 0.8rem;
            fill: var(--text-secondary);
            text-anchor: middle;
        }

        .bar-label.active {
            fill: var(--text-primary);
            font-weight: bold;
        }

        /* Tabs Selection */
        .tabs {
            display: flex;
            background: var(--surface-color);
            padding: 4px;
            border-radius: 12px;
            gap: 4px;
            margin-top: auto;
            border: 1px solid var(--border-color);
        }

        .tab {
            flex: 1;
            padding: 10px;
            border: none;
            background: var(--button-inactive);
            color: var(--text-secondary);
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab.active {
            background: var(--button-active);
            color: var(--text-primary);
        }

        /* Tooltip style popup */
        #tooltip {
            position: absolute;
            background: #2c2c2c;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
            border: 1px solid #444;
            z-index: 10;
            white-space: nowrap;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }

        /* Footer text */
        .footer-hint {
            margin-top: 15px;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: center;
            line-height: 1.5;
            padding: 0 10px;
        }

        /* Mobile specific targets */
        body.mobile-mode .tab { padding: 14px; font-size: 1rem; }
        body.mobile-mode .nav-btn { padding: 12px; }
        body.mobile-mode .header h1 { font-size: 1.25rem; }
    </style>
</head>
<body>

<div id="app">
    <div class="header">
        <button class="nav-btn" onclick="app.prevWeek()" id="prev-btn" aria-label="Előző hét">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
        </button>
        <h1 id="date-range">december 15–21.</h1>
        <button class="nav-btn" onclick="app.nextWeek()" id="next-btn" aria-label="Következő hét">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
        </button>
    </div>

    <div class="summary">
        <div class="summary-value">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="M13.5,19H14.5C14.78,19 15,18.78 15,18.5V17.5H13.5V19M11,19H12V17.5H11V19M13.5,16.5H15V15.5H13.5V16.5M11,16.5H12V15.5H11V16.5M13.5,14.5H15V13.5H13.5V14.5M11,14.5H12V13.5H11V14.5M13.5,12.5H15V11.5H13.5V12.5M11,12.5H12V11.5H11V12.5M16,19V11.5C16,10.12 14.88,9 13.5,9H11V6.5C11,5.12 9.88,4 8.5,4C7.12,4 6,5.12 6,6.5V13.5C6,14.88 7.12,16 8.5,16H10V18.5C10,19.88 11.12,21 12.5,21H16V19M8.5,15C7.67,15 7,14.33 7,13.5V6.5C7,5.67 7.67,5 8.5,5C9.33,5 10,5.67 10,6.5V7H11.5V10.5H13.5C14.05,10.5 14.5,10.95 14.5,11.5V12.5H12.5V13.5H14.5V14.5H12.5V15.5H14.5V16.5H12.5V17.5H14.5V18.5C14.5,19.05 14.05,19.5 13.5,19.5H12.5C11.95,19.5 11.5,19.05 11.5,18.5V16.5H10.5V15H8.5Z" />
            </svg>
            <span id="summary-total">22 505 lépés</span>
        </div>
    </div>

    <div class="chart-container">
        <div class="chart-y-axis">
            <span id="y-max">11 000</span>
            <span id="y-goal" class="highlight">10 000</span>
            <span id="y-mid">5 000</span>
            <span>0</span>
        </div>
        <svg id="chart" class="chart-svg" viewBox="0 0 300 200">
            <!-- Grid Lines -->
            <line x1="0" y1="180" x2="280" y2="180" class="grid-line" />
            <line x1="0" y1="100" x2="280" y2="100" class="grid-line" />
            <line x1="0" y1="20" x2="280" y2="20" class="grid-line" />
            <line id="goal-line" x1="0" y1="40" x2="280" y2="40" class="grid-line goal" />

            <!-- Bars will be injected here -->
            <g id="bars-group"></g>

            <!-- Labels -->
            <text x="20" y="195" class="bar-label">H</text>
            <text x="60" y="195" class="bar-label">K</text>
            <text x="100" y="195" class="bar-label">Sze</text>
            <text x="140" y="195" class="bar-label">Cs</text>
            <text x="180" y="195" class="bar-label">P</text>
            <text x="220" y="195" class="bar-label">Szo</text>
            <text x="260" y="195" class="bar-label active">V</text>
        </svg>
        <div id="tooltip"></div>
    </div>

    <div class="tabs">
        <button id="btn-points" class="tab" onclick="app.setMode('points')">Szívpontok</button>
        <button id="btn-steps" class="tab active" onclick="app.setMode('steps')">Lépések</button>
    </div>

    <div class="footer-hint" id="footer-text">
        A lépésszámmal azt mérheti, hogy mennyit mozog. Napi cél: 10 000 lépés.
    </div>
</div>

<script>
    const app = {
        mode: 'steps',
        currentWeekOffset: 0,
        audioCtx: null,

        data: {
            steps: [
                [200, 1500, 8500, 7200, 8600, 9500, 2405],
                [6000, 11000, 9200, 11500, 10200, 14000, 8500],
                [4200, 3100, 5800, 2400, 9100, 11200, 5100]
            ],
            points: [
                [5, 12, 45, 38, 42, 55, 18],
                [35, 60, 50, 75, 62, 80, 45],
                [22, 18, 30, 15, 52, 65, 28]
            ]
        },

        init() {
            this.render();
            this.checkMobile();
            window.addEventListener('resize', () => this.checkMobile());
        },

        checkMobile() {
            if (window.innerWidth < 450) {
                document.body.classList.add('mobile-mode');
            } else {
                document.body.classList.remove('mobile-mode');
            }
        },

        playSound(type) {
            try {
                if (!this.audioCtx) this.audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = this.audioCtx.createOscillator();
                const gain = this.audioCtx.createGain();
                
                osc.connect(gain);
                gain.connect(this.audioCtx.destination);
                
                if (type === 'click') {
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(440, this.audioCtx.currentTime);
                    osc.frequency.exponentialRampToValueAtTime(220, this.audioCtx.currentTime + 0.1);
                    gain.gain.setValueAtTime(0.05, this.audioCtx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.001, this.audioCtx.currentTime + 0.1);
                    osc.start();
                    osc.stop(this.audioCtx.currentTime + 0.1);
                } else if (type === 'nav') {
                    osc.type = 'triangle';
                    osc.frequency.setValueAtTime(330, this.audioCtx.currentTime);
                    osc.frequency.exponentialRampToValueAtTime(350, this.audioCtx.currentTime + 0.05);
                    gain.gain.setValueAtTime(0.03, this.audioCtx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.001, this.audioCtx.currentTime + 0.05);
                    osc.start();
                    osc.stop(this.audioCtx.currentTime + 0.05);
                }
            } catch (e) { console.warn("Audio Context blocked"); }
        },

        setMode(mode) {
            if (this.mode === mode) return;
            this.playSound('click');
            this.mode = mode;
            document.getElementById('btn-steps').classList.toggle('active', mode === 'steps');
            document.getElementById('btn-points').classList.toggle('active', mode === 'points');
            
            const hint = mode === 'steps' ? 'A lépésszámmal azt mérheti, hogy mennyit mozog. Napi cél: 10 000 lépés.' : 'A szívpontokkal a szívműködést fokozó mozgást mérheti. Napi cél: 50 pont.';
            document.getElementById('footer-text').innerText = hint;

            this.render();
        },

        prevWeek() {
            if (Math.abs(this.currentWeekOffset) < this.data.steps.length - 1) {
                this.playSound('nav');
                this.currentWeekOffset--;
                this.render();
            }
        },

        nextWeek() {
            if (this.currentWeekOffset < 0) {
                this.playSound('nav');
                this.currentWeekOffset++;
                this.render();
            }
        },

        render() {
            const dataIdx = Math.abs(this.currentWeekOffset);
            const dataset = this.mode === 'steps' ? this.data.steps[dataIdx] : this.data.points[dataIdx];
            const total = dataset.reduce((a, b) => a + b, 0);
            
            // Header Logic
            const months = ["január", "február", "március", "április", "május", "június", "július", "augusztus", "szeptember", "október", "november", "december"];
            const baseMonth = 11; // December
            const startDay = 15 + (this.currentWeekOffset * 7);
            const endDay = startDay + 6;
            document.getElementById('date-range').innerText = `${months[baseMonth]} ${startDay}–${endDay}.`;
            
            // Summary Text
            const unit = this.mode === 'steps' ? 'lépés' : 'szívpont';
            document.getElementById('summary-total').innerHTML = `<strong>${total.toLocaleString('hu-HU')}</strong> ${unit}`;

            // Button states
            document.getElementById('prev-btn').disabled = Math.abs(this.currentWeekOffset) >= this.data.steps.length - 1;
            document.getElementById('next-btn').disabled = this.currentWeekOffset >= 0;

            // Axis Logic
            const maxVal = this.mode === 'steps' ? 11000 : 100;
            const goalVal = this.mode === 'steps' ? 10000 : 70;
            const midVal = maxVal / 2;

            document.getElementById('y-max').innerText = maxVal.toLocaleString('hu-HU');
            document.getElementById('y-goal').innerText = goalVal.toLocaleString('hu-HU');
            document.getElementById('y-mid').innerText = midVal.toLocaleString('hu-HU');

            // Bar Group Logic
            const barsGroup = document.getElementById('bars-group');
            barsGroup.innerHTML = '';
            
            const chartHeight = 180 - 20; // range from y=20 to y=180
            const barWidth = 12;
            const startX = 20 - (barWidth/2);
            const spacing = 40;

            // Update goal line position
            const goalY = 180 - ((goalVal / maxVal) * chartHeight);
            const goalLine = document.getElementById('goal-line');
            goalLine.setAttribute('y1', goalY);
            goalLine.setAttribute('y2', goalY);

            dataset.forEach((val, i) => {
                const height = (val / maxVal) * chartHeight;
                const cappedHeight = Math.min(height, chartHeight + 10);
                const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                
                rect.setAttribute("x", startX + (i * spacing));
                rect.setAttribute("y", 180);
                rect.setAttribute("width", barWidth);
                rect.setAttribute("height", 0);
                rect.setAttribute("class", "bar");
                
                // Animate to height
                setTimeout(() => {
                    rect.setAttribute("y", 180 - cappedHeight);
                    rect.setAttribute("height", cappedHeight);
                }, 50);
                
                rect.addEventListener('mouseenter', (e) => this.showTooltip(e, val, unit));
                rect.addEventListener('mouseleave', () => this.hideTooltip());
                rect.addEventListener('touchstart', (e) => {
                    this.showTooltip(e, val, unit);
                });
                
                barsGroup.appendChild(rect);
            });
        },

        showTooltip(e, val, unit) {
            const tooltip = document.getElementById('tooltip');
            tooltip.innerText = `${val.toLocaleString('hu-HU')} ${unit}`;
            tooltip.style.opacity = '1';
            tooltip.style.transform = 'translateY(0)';
            
            const rect = e.target.getBoundingClientRect();
            const containerRect = document.querySelector('.chart-container').getBoundingClientRect();
            
            tooltip.style.left = `${rect.left - containerRect.left + (rect.width / 2) - (tooltip.offsetWidth / 2)}px`;
            tooltip.style.top = `${rect.top - containerRect.top - 40}px`;
        },

        hideTooltip() {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.opacity = '0';
            tooltip.style.transform = 'translateY(5px)';
        }
    };

    window.onload = () => app.init();
</script>

</body>
</html>