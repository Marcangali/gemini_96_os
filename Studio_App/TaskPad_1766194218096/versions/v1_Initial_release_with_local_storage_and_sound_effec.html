<!--
APP_NAME: Task Pad
APP_DESCRIPTION: A simple, elegant task manager with satisfying sound effects.
APP_ICON: 
APP_CATEGORY: Productivity
WINDOW_WIDTH: 380
WINDOW_HEIGHT: 500
VERSION_SUMMARY: Initial release with local storage and sound effects.
STORE_ID: task-pad-11
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Pad</title>
    <style>
        :root {
            --bg-color: #f3f3f3;
            --surface-color: #ffffff;
            --primary-color: #0067c0;
            --text-color: #202020;
            --text-secondary: #5d5d5d;
            --border-color: #e5e5e5;
            --danger-color: #c42b1c;
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
            --radius-md: 8px;
            --radius-lg: 12px;
            --font-main: "Segoe UI Variable", "Segoe UI", system-ui, -apple-system, sans-serif;
        }

        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-main);
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* App Header */
        header {
            padding: 24px 24px 12px 24px;
            background: var(--bg-color);
            z-index: 10;
        }

        h1 {
            margin: 0;
            font-size: 24px;
            font-weight: 600;
        }

        .date-display {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 4px;
            font-weight: 500;
        }

        /* Input Area */
        .input-group {
            padding: 12px 24px;
            display: flex;
            gap: 10px;
        }

        #taskInput {
            flex: 1;
            padding: 10px 14px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            outline: none;
            font-family: var(--font-main);
            font-size: 14px;
            background: var(--surface-color);
            box-shadow: var(--shadow-sm);
            transition: border-color 0.2s, box-shadow 0.2s;
            user-select: text;
            -webkit-user-select: text;
        }

        #taskInput:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 103, 192, 0.2);
        }

        #addBtn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            width: 42px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s, transform 0.1s;
            box-shadow: var(--shadow-sm);
        }

        #addBtn:hover {
            background-color: #005a9e;
        }

        #addBtn:active {
            transform: scale(0.95);
        }

        /* Task List */
        .task-list {
            flex: 1;
            overflow-y: auto;
            padding: 0 24px 24px 24px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .task-list::-webkit-scrollbar {
            width: 6px;
        }

        .task-list::-webkit-scrollbar-thumb {
            background-color: #ccc;
            border-radius: 3px;
        }

        .task-list::-webkit-scrollbar-track {
            background: transparent;
        }

        .task-item {
            background: var(--surface-color);
            padding: 12px 16px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: var(--shadow-sm);
            border: 1px solid transparent;
            transition: all 0.2s ease;
            animation: slideIn 0.3s cubic-bezier(0.2, 0.9, 0.3, 1);
        }

        .task-item:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideOut {
            to { opacity: 0; transform: translateX(20px); height: 0; margin: 0; padding: 0; }
        }

        .task-item.completed {
            background-color: #f9f9f9;
            color: var(--text-secondary);
        }

        .task-item.completed .task-text {
            text-decoration: line-through;
            opacity: 0.7;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--text-secondary);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .task-item.completed .checkbox {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .checkbox svg {
            width: 12px;
            height: 12px;
            fill: white;
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.2s;
        }

        .task-item.completed .checkbox svg {
            opacity: 1;
            transform: scale(1);
        }

        .task-text {
            flex: 1;
            font-size: 14px;
            word-break: break-word;
            line-height: 1.4;
        }

        .delete-btn {
            opacity: 0;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 6px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .task-item:hover .delete-btn {
            opacity: 1;
        }

        .delete-btn:hover {
            background-color: #ffeaea;
            color: var(--danger-color);
        }

        /* Empty State */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-secondary);
            text-align: center;
            opacity: 0.6;
        }

        .empty-state svg {
            width: 48px;
            height: 48px;
            margin-bottom: 12px;
            fill: #ccc;
        }

        /* Mobile / Touch Mode Overrides */
        body.mobile-mode .task-item {
            padding: 16px;
        }
        
        body.mobile-mode .checkbox {
            width: 24px;
            height: 24px;
        }
        
        body.mobile-mode .delete-btn {
            opacity: 1; /* Always show delete on touch */
            padding: 10px;
        }

        body.mobile-mode #addBtn {
            width: 50px;
        }

    </style>
</head>
<body>

    <header>
        <div class="date-display" id="dateDisplay">Monday, January 1</div>
        <h1>My Tasks</h1>
    </header>

    <div class="input-group">
        <input type="text" id="taskInput" placeholder="Add a task..." maxlength="60">
        <button id="addBtn" aria-label="Add Task">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        </button>
    </div>

    <div class="task-list" id="taskList">
        <!-- Tasks injected here -->
        <div class="empty-state" id="emptyState">
            <svg viewBox="0 0 24 24">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
            <p>All caught up!<br>Add a task to get started.</p>
        </div>
    </div>

    <script>
        /**
         * Task Pad - Application Logic
         */
        
        // --- State Management ---
        const STORAGE_KEY = 'gemini11_taskpad_data';
        let tasks = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
        
        // --- DOM Elements ---
        const taskListEl = document.getElementById('taskList');
        const taskInput = document.getElementById('taskInput');
        const addBtn = document.getElementById('addBtn');
        const emptyState = document.getElementById('emptyState');
        const dateDisplay = document.getElementById('dateDisplay');

        // --- Audio System (Web Audio API) ---
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioCtx = new AudioContext();

        const playSound = (type) => {
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }

            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();

            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            const now = audioCtx.currentTime;

            if (type === 'add') {
                // Happy "Pop" sound
                osc.type = 'sine';
                osc.frequency.setValueAtTime(440, now);
                osc.frequency.exponentialRampToValueAtTime(880, now + 0.1);
                gainNode.gain.setValueAtTime(0.3, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                osc.start(now);
                osc.stop(now + 0.1);
            } else if (type === 'complete') {
                // Satisfaction "Ding"
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(523.25, now); // C5
                osc.frequency.setValueAtTime(659.25, now + 0.1); // E5
                gainNode.gain.setValueAtTime(0.2, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.4);
                osc.start(now);
                osc.stop(now + 0.4);
            } else if (type === 'delete') {
                // Quick "Swoosh" / Crumple
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, now);
                osc.frequency.exponentialRampToValueAtTime(50, now + 0.15);
                gainNode.gain.setValueAtTime(0.1, now);
                gainNode.gain.linearRampToValueAtTime(0, now + 0.15);
                osc.start(now);
                osc.stop(now + 0.15);
            } else if (type === 'error') {
                // Low thud
                osc.type = 'square';
                osc.frequency.setValueAtTime(100, now);
                gainNode.gain.setValueAtTime(0.1, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                osc.start(now);
                osc.stop(now + 0.1);
            }
        };

        // --- Core Logic ---

        function updateDate() {
            const now = new Date();
            const options = { weekday: 'long', month: 'long', day: 'numeric' };
            dateDisplay.textContent = now.toLocaleDateString('en-US', options);
        }

        function saveTasks() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks));
            renderTasks();
        }

        function addTask(text) {
            if (!text.trim()) {
                playSound('error');
                // Shake animation for input
                taskInput.style.transform = "translateX(5px)";
                setTimeout(() => taskInput.style.transform = "translateX(0)", 100);
                setTimeout(() => taskInput.style.transform = "translateX(-5px)", 200);
                setTimeout(() => taskInput.style.transform = "translateX(0)", 300);
                return;
            }

            const newTask = {
                id: Date.now(),
                text: text.trim(),
                completed: false,
                createdAt: Date.now()
            };

            tasks.unshift(newTask);
            saveTasks();
            playSound('add');
            taskInput.value = '';
            taskInput.focus();
        }

        function toggleTask(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                // Move completed tasks to bottom, active to top
                tasks.sort((a, b) => {
                    if (a.completed === b.completed) return b.createdAt - a.createdAt;
                    return a.completed ? 1 : -1;
                });
                
                if(task.completed) playSound('complete');
                saveTasks();
            }
        }

        function deleteTask(id) {
            playSound('delete');
            // Find element to animate out
            const el = document.querySelector(`[data-id="${id}"]`);
            if (el) {
                el.style.animation = "slideOut 0.2s forwards";
                setTimeout(() => {
                    tasks = tasks.filter(t => t.id !== id);
                    saveTasks();
                }, 200);
            } else {
                tasks = tasks.filter(t => t.id !== id);
                saveTasks();
            }
        }

        function createSVGCheck() {
            return `<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>`;
        }

        function createSVGTrash() {
            return `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>`;
        }

        function renderTasks() {
            taskListEl.innerHTML = '';

            if (tasks.length === 0) {
                taskListEl.appendChild(emptyState);
                emptyState.style.display = 'flex';
                return;
            }
            
            emptyState.style.display = 'none'; // Ensure empty state is hidden

            tasks.forEach(task => {
                const item = document.createElement('div');
                item.className = `task-item ${task.completed ? 'completed' : ''}`;
                item.setAttribute('data-id', task.id);
                
                // Checkbox
                const checkbox = document.createElement('div');
                checkbox.className = 'checkbox';
                checkbox.innerHTML = createSVGCheck();
                checkbox.onclick = () => toggleTask(task.id);

                // Text
                const text = document.createElement('span');
                text.className = 'task-text';
                text.textContent = task.text;
                // Allow clicking text to toggle as well for better UX
                text.onclick = (e) => {
                    // Prevent text selection double click issues
                    if (e.detail > 1) return; 
                    toggleTask(task.id);
                };

                // Delete Button
                const delBtn = document.createElement('button');
                delBtn.className = 'delete-btn';
                delBtn.innerHTML = createSVGTrash();
                delBtn.ariaLabel = "Delete Task";
                delBtn.onclick = (e) => {
                    e.stopPropagation();
                    deleteTask(task.id);
                };

                item.appendChild(checkbox);
                item.appendChild(text);
                item.appendChild(delBtn);
                taskListEl.appendChild(item);
            });
        }

        // --- Event Listeners ---
        
        addBtn.addEventListener('click', () => {
            addTask(taskInput.value);
        });

        taskInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addTask(taskInput.value);
            }
        });

        // Initialize Responsive Mode Check
        function checkMobileMode() {
            if (document.body.classList.contains('mobile-mode')) {
                // Adjustments if necessary purely via JS, though CSS handles most
            }
        }

        // Observe class changes on body for real-time mode switching
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.attributeName === 'class') {
                    checkMobileMode();
                }
            });
        });
        observer.observe(document.body, { attributes: true });

        // Init
        updateDate();
        renderTasks();

    </script>
</body>
</html>